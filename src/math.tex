%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Contents: Math typesetting with LaTeX
% $Id: math.tex 169 2008-09-24 07:32:13Z oetiker $
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


% Pour les informations de licence, voir title.tex.
% See title.tex for license information.

\chapter{Formules Mathématiques}
\thispagestyle{plain}

\begin{intro}
  Vous êtes prêts ! Dans ce chapitre nous allons aborder l'atout
  majeur de \TeX{} : la composition de formules mathématiques.
  Mais attention, ce chapitre ne fait que décrire les commandes de
  base. Bien que ce qui est expliqué ici soit suffisant pour la
  majorité des utilisateurs, ne désespérez pas si vous n'y trouvez pas
  la solution à votre problème de mise en forme d'une équation
  mathématique. Il y a de fortes chances pour que la solution se
  trouve dans l'extension \pai{amsmath} de \AmS-\LaTeX{}.% 
\end{intro}
  
\section{L'ensemble \texorpdfstring{\AmS}{AMS}-\LaTeX{}}

Si vous souhaitez saisir des textes \wi{mathématiques} (avancés), vous
devriez utiliser \AmS-\LaTeX{}. Le paquet \AmS-\LaTeX{} est une
collection d'extensions et de classes pour la saisie
mathématique. Nous traiterons ici principalement de l'extension
\pai{amsmath} qui fait partie de ce paquet. \AmS-\LaTeX{} est produit
par l'\emph{American Mathematical Society} (NdT. la Société
Américaine de Mathématiques) et est utilisée extensivement pour la
mise en forme de mathématiques. \LaTeX{} seul fournit bien quelques
fonctionnalités et environnements basiques, mais ils sont
relativement limités (voire, la logique s'appliquerait plutôt dans
l'autre sens : \AmS-\LaTeX{} est \emph{illimité} !) et parfois
incohérents.

\AmS-\LaTeX{} fait partie de la distribution de base et est fournie
avec toutes les distributions récentes de \LaTeX{}.\footnote{Si la
  vôtre ne l'a pas, visitez
  \texttt{CTAN:macros/latex/required/amslatex}. Dans ce chapitre nous
  supposerons qu'\pai{amsmath} est chargé en préambule, via
  {\ci{usepackage}\{amsmath\}}}.

\section{Équations simples}

Il y a deux façons de mettre en forme des \wi{formules}
mathématiques~: au fil du texte à l'intérieur d'un paragraph
(\emph{\wi{style en-ligne}}) ou le paragraphe peut être découpé pour
que la mise en forme soit séparée (\textit{\wi{style hors-texte}}). Les
\wi{équation}s mathématiques \emph{dans} un paragraphe sont entrées
entre deux signes \index{$@\texttt{\$}} \texttt{\$} :
\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse : $a^2 + b^2 = c^2$
\end{example}
\begin{example}
 \TeX{} se prononce 
$\tau\epsilon\chi$\\[5pt]
100~m$^{3}$ d'eau\\[5pt]
J'$\heartsuit$ \LaTeX{}
\end{example}

% just to avoid bad emacs colorizing because of too many $
%
Il vaut mieux composer les équations ou les formules plus importantes
\og \emph{hors-texte} \fg{} plutôt que découper un paragraphe pour
cela, c'est-à-dire sur des lignes à part. À cette fin, on les
inclut entre \verb|\begin{|\ei{equation}\verb|}| et
\verb|\end{equation}|.\footnote{Il s'agit d'une commande d'
\textsf{amsmath}. Si vous n'y avez pas accès pour quelque obscure
raison, utilisez l'environnement \ei{displaymath} de \LaTeX{} à la
place.}
Vous pouvez ensuite utiliser  \ci{label} pour marquer un numéro
d'équation et vous y référer ailleurs dans le texte via la commande
\ci{eqref}. Si vous voulez plutôt nommer l'équation, utiliser \ci{tag}
à la place. Vous ne pouvez pas utiliser \ci{eqref} avec \ci{tag}.

\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse :
 \begin{equation}
   a^2 + b^2 = c^2
 \end{equation}
Einstein a dit
 \begin{equation}
   E = mc^2 \label{intelligent}
 \end{equation}
Il n'a pas dit
 \begin{equation}
  1 + 1 = 3 \tag{idiot}
 \end{equation}
Voici une référence à
\eqref{intelligent}.
\end{example}

Si vous ne voulez pas que \LaTeX{} numérote vos équations, utilisez la
version étoilée d'\texttt{equation}, \ei{equation*}, ou mieux encore,
entourez votre équation par \ci{[} et \ci{]} :
\footnote{\index{equation!\textsf{amsmath}} \index{equation!\LaTeX{}}
Cela provient encore d'\textsf{amsmath}. Si vous ne l'avez pas chargé,
utilisez l'environnement \texttt{equation} de \LaTeX{} à la place. Les
noms des commandes \texttt{amsmath}/\LaTeX{} peuvent prêter à
confusion, mais ce n'est pas un vrai problème puisque tout le monde
utilise \texttt{amsmath} de toute façon. Il vaut mieux en règle
générale charger l'extension dès le départ parce que vous pourriez
l'utiliser plus tard. De plus les \texttt{equation} non numérotées de
\LaTeX{} entrent en conflit avec les \texttt{equation} numérotées
d'\AmS-\LaTeX{}.}.
\begin{example}
Ajoutez $a$ au carré 
et $b$ au carré pour obtenir
$c$ au carré. Ou, en 
utilisant une approche plus
matheuse :
 \begin{equation*}
   a^2 + b^2 = c^2
 \end{equation*}
ou plus parcimonieusement :
 \[ a^2 + b^2 = c^2 \]
\end{example}


Remarquez que les expressions mathématiques sont formatées
différemment selon qu'elles sont composées \og \wi{en-ligne} \fg{} ou \og
\wi{hors-texte} \fg{} :
 \begin{example}
Style en-ligne :
 $\lim_{n \to \infty} 
 \sum_{k=1}^n \frac{1}{k^2} 
 = \frac{\pi^2}{6}$.
Style hors-text :
 \begin{equation}
  \lim_{n \to \infty} 
  \sum_{k=1}^n \frac{1}{k^2} 
  = \frac{\pi^2}{6}
 \end{equation}
\end{example}

En style en-ligne, utilisez la commande \ci{smash} sur des
(sous-)expressions mathématiques à plusieurs niveaux, que ce soit vers
le haut ou vers le bas. Cela incite \LaTeX{} à ne pas prendre en
compte la hauteur de ces expressions et permet d'avoir un interligne
régulier.

\begin{example}
Une expression mathématique
$d_{e_{e_p}}$ suivie par une
expression $h^{i^{g^h}}$. Par
opposition à une expression
avec smash \smash{$d_{e_{e_p}}$}
suivie par une expression
\smash{$h^{i^{g^h}}$}.
\end{example}


\subsection{Mode mathématique}


Il y a également des différences notables entre le \wi{mode
  \emph{mathématique}} et le mode \emph{texte}. Par exemple, en mode
\emph{mathématique} :

\begin{enumerate}
\item \index{espacement!mathématique}
      la plupart des espaces et des retours à la ligne n'ont aucune
      signification. Les espaces sont déduites de la logique de la
      formule ou indiquées à l'aide de commandes spécifiques telles
      que \ci{,}, \ci{quad} ou\ci{qquad} (nous reparlerons de cela en
      section~\ref{sec:math-spacing}) ;
\item les lignes vides ne sont pas autorisées. Un seul paragraphe par
      formule ;
\item chaque lettre est considérée comme étant le nom d'une variable
      et sera imprimée comme tel. Pour insérer du  texte
      normal (police et espacement standard) dans une formule, il 
      faut utiliser la commande \verb|\textrm{...}| (voir également la
      section \ref{sec:fontsz} en page \pageref{sec:fontsz}).
\end{enumerate}

\begin{example}
$\forall x \in \mathbf{R}:
 \qquad x^{2} \geq 0$
\end{example}
\begin{example}
$x^{2} \geq 0\qquad
 \text{pour tout}x\in\mathbf{R}$
 \end{example}
 
Une mode récente et contestable pousse à utiliser la police 
\og \wi{blackboard bold} \fg{} (Gras Tableau Noir, ainsi appelée car c'est par
le doublement des verticales des lettres que l'on simule le gras
typographique lorsqu'on ne peut faire autrement) qui est obtenue par
la commande \ci{mathbb} de l'extension \pai{amssymb}
\footnote{\pai{amssymb} ne fait pas partie du paquet \AmS-\LaTeX{},
  mais fait peut-être partie de votre distribution \LaTeX{}. Vérifiez
  celle-ci ou visitez \texttt{CTAN:/fonts/amsfonts/latex/} pour
  l'obtenir.}
pour désigner les ensembles de nombres entiers, réels, etc.
\ifx\mathbb\undefined\else
L'exemple précédent devient :
\begin{example}
$x^{2} \geq 0\qquad
 \text{pour tout } x 
 \in \mathbb{R}$
\end{example}
\fi

Référez-vous aux tableaux \ref{mathalpha} en page \pageref{mathalpha}
et \ref{mathfonts} en page \pageref{mathfonts} pour plus de polices
mathématiques.


\section{Éléments d'une formule mathématique}


Cette section décrit les commandes les plus importantes 
du mode mathématique. La plupart des commandes de cette section ne
nécessitent pas \textsf{amsmath}, sauf mention explicite, mais
chargez-la tout de même.


\index{grec!alphabet}
Les lettres \textbf{grecques minuscules} sont saisies de la manière
suivante :
\verb|\alpha|, \verb|\beta|, \verb|\gamma|, etc. Les lettres
\textbf{grecques majuscules} sont quant à elles saisies ainsi :
\verb|\Gamma|, \verb|\Delta|, etc.
\footnote{Il n'y a pas de Alpha, Beta\ldots{} majuscule dans \LaTeXe{}
parce que c'est le même caractère que le A,B\ldots{} romain. Lorsque le nouveau
codage mathématique sera terminé, cela changera.} sont saisies

Référez-vous au tableau~\ref{greekletters} en
page~\pageref{greekletters} pour une liste de lettres grecques.
\begin{example}
$\lambda,\xi,\pi,\theta,
 \mu,\Phi,\Omega,\Delta$
\end{example}
 

Les \textbf{indices et exposants} sont
\index{indice}\index{exposant} positionnés en utilisant les caractères
\verb|_|\index{_@\verb"|_"|} et \verb|^|\index{^@\verb"|^"|}.

La plupart des commandes du mode mathématique ne s'applique qu'au
caractère suivant. Pour qu'une commande s'applique à un ensemble de
caractères, il faut les grouper en utilisant des accolades :
\verb|{...}|. 

Le tableau~\ref{binaryrel} en page \pageref{binaryrel}  liste de
nombreuses autres relations binaires comme $\subseteq$ et $\perp$.

\begin{example}
$p^3_{ij} \qquad
 m_\text{Knuth} \\[5pt]
 a^x+y \neq a^{x+y}\qquad 
 e^{x^2} \neq {e^x}^2$
\end{example}

%SC: nth root with the accent
La \textbf{\wi{racine carrée}} est saisie via \ci{sqrt}. La
racine $n^\text{ieme}$ est produite par la commande
\verb|\sqrt[|$n$\verb|]|. La taille du symbole racine est calculée par
\LaTeX. Pour obtenir le symbole seul, utilisez \verb|\surd|.

Voyez d'autres sortes de flèches comme $\hookrightarrow$ et
$\rightleftharpoons$ dans le tableau~\ref{tab:arrows} en page
\pageref{tab:arrows}.
\begin{example}
$\sqrt{x} \Leftrightarrow x^{1/2}
 \quad \sqrt[3]{2}
 \quad \sqrt{x^{2} + \sqrt{y}}
 \quad \surd[x^2 + y^2]$
\end{example}


\index{points de suspension!verticaux}
\index{vertical!points de suspension}
\index{points de suspension!diagonaux}
En général, les \textbf{\wi{point}s} indiquant une opération de
multiplication ne sont pas imprimés. Cependant, il arrive qu'il soit
nécessaire de les faire apparaître pour aider la lecture. Utilisez
alors \ci{cdot} qui imprime un seul point centré. \ci{cdots} imprime
des \textbf{\wi{points de suspension}} centrés (à la manière de points
de suspension situés plus haut sur la ligne). \ci{ldots} imprime des
points de suspension normaux. En plus de ces commandes vous avez
également \ci{vdots} pour des points alignés verticalement et
\ci{ddots} qui imprime des \wi{points en diagonale}. Vous en trouverez
un exemple en section~\ref{sec:arraymat}.
\begin{example}
$\Psi = v_1 \cdot v_2
 \cdot \ldots \qquad 
 n! = 1 \cdot 2 
 \cdots (n-1) \cdot n$
\end{example}

Les commandes \ci{overline} et \ci{underline} créent un \textbf{trait
horizontal} au-dessus ou au-dessous d'une expression :
\index{horizontal!trait}
\index{trait!horizontal}
\begin{example}
$0.\overline{3} = 
 \underline{\underline{1/3}}$
\end{example}

Les commandes \ci{overbrace} et \ci{underbrace} créent une grande
\textbf{accolade horizontale} au-dessus ou au-dessous d'une
expression :
\index{horizontal!accolade}
\index{accolade!horizontale}
\begin{example}
$\underbrace{\overbrace{a+b+c}^6 
 \cdot \overbrace{d+e+f}^9}
 _\text{meaning of life} = 42$
\end{example}

\index{mathématiques!accents}
Pour ajouter des accents mathématiques tels que des \textbf{flèches}
ou des \textbf{\wi{tilde}s}, vous pouvez utiliser les commandes du
tableau~\ref{mathacc} p.~\pageref{mathacc}.  Les chapeaux et les
tildes larges, couvrant plusieurs caractères, sont produits par les
commandes \ci{widetilde} et \ci{widehat}. Notez bien la différence
entre \ci{hat} et \ci{widehat} ainsi que le placement de \ci{bar} pour
une variable indicée.La commande \verb|'|\index{'@\verb"|'"|} produit
un \wi{prime} :
% a dash is --
\begin{example}
$f(x) = x^2 \qquad f'(x) 
 = 2x \qquad f''(x) = 2\\[5pt]
 \hat{XY} \quad \widehat{XY}
 \quad \bar{x_0} \quad \bar{x}_0$
\end{example}


Les \textbf{\wi{vecteurs}} sont en général marqués en ajoutant une
flèche au-dessus du nom de la variable. Ceci est obtenu par la
commande \ci{vec}. Pour coder le vecteur de $A$ à $B$, les commandes
\ci{overrightarrow} et \ci{overleftarrow} sont bien utiles :
\begin{example}
$\vec{a} \qquad
 \vec{AB} \qquad
 \overrightarrow{AB}$
\end{example}

Les noms des fonctions telles que sinus doivent être imprimés à l'aide
d'une police droite et non en italique comme les variables. C'est
pourquoi \LaTeX{} fournit les commandes suivantes pour les fonctions
les plus utilisées :
\index{mathématiques!fonctions}

\begin{tabular}{llllll}
\ci{arccos} &  \ci{cos}  &  \ci{csc} &  \ci{exp} &  \ci{ker}    & \ci{limsup} \\
\ci{arcsin} &  \ci{cosh} &  \ci{deg} &  \ci{gcd} &  \ci{lg}     & \ci{ln}     \\
\ci{arctan} &  \ci{cot}  &  \ci{det} &  \ci{hom} &  \ci{lim}    & \ci{log}    \\
\ci{arg}    &  \ci{coth} &  \ci{dim} &  \ci{inf} &  \ci{liminf} & \ci{max}    \\
\ci{sinh}   & \ci{sup}   &  \ci{tan}  & \ci{tanh}&  \ci{min}    & \ci{Pr}     \\
\ci{sec}    & \ci{sin} \\
\end{tabular}

\begin{example}
\[\lim_{x \rightarrow 0}
 \frac{\sin x}{x}=1\]
\end{example}

Les fonctions n'apparaissant pas dans la liste peuvent être déclarées
avec \ci{DeclareMathOperator}. Il y a même une version étoilée pour
les fonctions avec des limites. Cette commande ne peut être utilisée
qu'en préambule, aussi les lignes commentées de l'exemple doivent être
ajoutées en préambule pour fonctionner.

\begin{example}
%\DeclareMathOperator{\argh}{argh}
%\DeclareMathOperator*{\nut}{Nut}
\[3\argh = 2\nut_{x=1}\]
\end{example}

Pour la fonction \wi{modulo}, il y a deux commandes possibles : 
\ci{bmod} pour l'opérateur binaire et 
\ci{pmod} pour l'opérateur unaire :
\begin{example}
$a\bmod b \\
 x\equiv a \pmod{b}$
\end{example}

Un trait de \textbf{\wi{fraction}} est produit par la commande
\ci{frac}\verb|{|\emph{numérateur}\verb|}{|\emph{dénominateur}\verb|}|. Pour
les équations en-ligne, la fraction est réduite pour tenir sur la
ligne. Ce style peut aussi s'obtenir hors-text avec
\ci{tfrac}. L'inverse, c'est-à-dire obtenir des fractions en-ligne
selon le style hors-texte, est obtenu avec \ci{dfrac}.  La forme
utilisant un \emph{slash} ($1/2$) est souvent préférable pour des
petits éléments.
\begin{example}
En style hors-texte :
\[3/8 \qquad \frac{3}{8} 
 \qquad \tfrac{3}{8} \]
\end{example}

\begin{example}
En style en-ligne :
$1\frac{1}{2}$~heures \qquad
$1\dfrac{1}{2}$~heures
\end{example}

Ici nous utilisons la commande \ci{partial} utilisée habituellement
pour une \wi{dérivée partielle} :
\begin{example}
\[\sqrt{\frac{x^2}{k+1}}\qquad
  x^\frac{2}{k+1}\qquad
  \frac{\partial^2f}
  {\partial x^2} \]
\end{example}

Pour imprimer des coefficients binomiaux (à l'américaine) ou d'autres
structures semblables, utilisez la commande \ci{binom} d'\pai{amsmath} :
%SC: maybe not the right translation for Pascal's rule
\begin{example}
La règle de Pascal est
\begin{equation*}
 \binom{n}{k} =\binom{n-1}{k}
 + \binom{n-1}{k-1}
\end{equation*}
\end{example}
 
Il est parfois utile, notamment pour des \wi{relations binaires}, de
pouvoir superposer des symboles.  La commande
\ci{stackrel}\verb|{#1}{#2}| place l'argument \verb|#1| en taille
réduite au-dessus de l'argument \verb|#2|, lui-même mis en position
normale :
\begin{example}
\begin{equation*}
 f_n(x) \stackrel{*}{\approx} 1
\end{equation*}
\end{example}

Les \textbf{\wi{intégrale}s} sont produites par la commande \ci{int},
les \textbf{\wi{somme}s} par la commande \ci{sum} et les produits par la
commande \ci{prod}. Les limites
inférieures et supérieures sont indiquées avec~\verb|_| et~\verb|^|
comme pour les indices et les exposants :
\begin{example}
\begin{equation*}
\sum_{i=1}^n \qquad
\int_0^{\frac{\pi}{2}} \qquad
\prod_\epsilon
\end{equation*}
\end{example}

Pour superposer des indices, l'extension \pai{amsmath} propose la
commande \ci{substack} :
\begin{example}
\begin{equation*}
\sum^n_{\substack{0<i<n \\ 
        j\subseteq i}}
   P(i,j) = Q(i,j)
\end{equation*}
\end{example}

\LaTeX{} fournit toutes sortes de symboles pour les
\textbf{\wi{crochets} et autres \wi{délimiteurs}} (par exemple
$[\;\langle\;\|\;\updownarrow$). Les \wi{parenthèses} et les crochets
sont obtenus avec les caractères correspondants, les \wi{accolades}
avec \verb|\{|, mais les autres délimiteurs ne sont obtenus que par des
commandes spéciales (par exemple \verb|\updownarrow|) :
\begin{example}
\begin{equation*}
{a,b,c} \neq \{a,b,c\}
\end{equation*}
\end{example}

Si vous ajoutez \ci{left} avant un délimiteur ouvrant ou
\ci{right} avant un délimiteur fermant, \LaTeX{} détermine
automatiquement la taille appropriée pour ce caractère. Remarquez
qu'il est nécessaire de fermer chaque délimiteur ouvrant
(\ci{left}) avec un délimiteur fermant (\ci{right}). Si vous
ne voulez pas de délimiteur fermant, utilisez le délimiteur invisible
\og \ci{right.} \fg{} :
\begin{example}
\begin{equation*}
1 + \left(\frac{1}{1-x^{2}}
    \right)^3 \qquad 
\left. \ddagger \frac{~}{~}\right)
\end{equation*}
\end{example}

Dans certains cas, il est nécessaire d'indiquer la taille exacte des
délimiteurs mathématiques à la main. Vous pouvez alors utiliser les
commandes \ci{big}, \ci{Big}, \ci{bigg} et \ci{Bigg} comme préfixes
des commandes qui impriment les délimiteurs :
\begin{example}
$\Big((x+1)(x-1)\Big)^{2}$\\
$\big( \Big( \bigg( \Bigg( \quad
\big\} \Big\} \bigg\} \Bigg\} \quad
\big\| \Big\| \bigg\| \Bigg\| \quad
\big\Downarrow \Big\Downarrow 
\bigg\Downarrow \Bigg\Downarrow$
\end{example}

Pour une liste de tous les délimiteurs disponibles, reportez-vous au
tableau~\ref{tab:delimiters}, page~\pageref{tab:delimiters}.



\section{Alignements verticaux}
\label{sec:vert}

\subsection{Équations longues}
\index{equation!longue}


Pour les formules qui prennent plusieurs lignes ou pour des
\wi{systèmes d'équations} \index{equations@équations!système d'},
utilisez les environnements \ei{align} et \verb|align*| plutôt que
\texttt{equation} ou \texttt{equation*}.%
\footnote{L'environnement \ei{align} provient
  d'\textsf{amsmath}. L'environnement similaire de \LaTeX{} sans
  \textsf{amsmath} est \ei{eqnarray}, mais il est déconseillé de
  l'utiliser pour des raisons d'incohérences d'espaces et de
  références.}
Avec \ei{align} chaque ligne est numérotée, alors que la variante
\verb|align*| ne produit aucun numéro.

Les environnements \ei{align} centrent l'équation par rapport au signe
\verb|&|. La commande \verb|\\| sépare les lignes.  Pour énumérer
seulement certaines équations particulières, utilisez \ci{nonumber}
pour supprimer la numérotation en la plaçant avant le saut de ligne
\verb|\\| :
\begin{example}
\begin{align}
f(x) &= (a+b)(a-b) \label{1}\\
     &= a^2-ab+ba-b^2  \\ 
     &= a^2+b^2 \tag{faux}
\end{align}
Ceci se réfère à \eqref{1}.
\end{example}

\index{equations@équations!longues}
Les \textbf{équations longues} ne sont pas découpées automatiquement
en morceaux harmonieux. L'auteur doit indiquer où les couper et
comment indenter la suite :
\begin{example}
\begin{align}
f(x) &= 3x^5 + x^4 + 2x^3 
                \nonumber \\
     &\qquad + 9x^2 + 12x + 23 \\
     &= g(x) - h(x)
\end{align}
\end{example}
L'extension \pai{amsmath} propose d'autres environnements utiles :
\verb|flalign|, \verb|gather|, \verb|multline| et
\verb|split|. Consultez la documentation de l'extension pour en savoir
plus.

\subsection{Tableaux et matrices}
\label{sec:arraymat}

Pour imprimer des \textbf{matrices}, utilisez l'environnement
\ei{array}. Il fonctionne de manière similaire à l'environnement
\texttt{tabular}. La commande \verb|\\| est utilisée pour séparer les
lignes :
\begin{example}
\begin{equation*}
 \mathbf{X} = \left( 
  \begin{array}{ccc}
   x_1 & x_2 & \ldots \\
   x_3 & x_4 & \ldots \\
   \vdots & \vdots & \ddots
  \end{array} \right)
\end{equation*}
\end{example}

L'environnement \ei{array} peut également être utilisé pour imprimer
des \wi{fonctions!par parties} en utilisant \og \verb|.| \fg{} comme
délimiteur (invisible) de droite :%
\footnote{Si vous avez de nombreuses constructions de ce genre,
  essayer l'environnement \ei{cases} d'\textsf{amsmath} peut en valoir
  la peine, puisqu'il simplifie ce type de syntaxe.}
\begin{example}
\begin{equation*}
|x| = \left\{
 \begin{array}{rl}
  -x & \text{si } x < 0\\
   0 & \text{si } x = 0\\
   x & \text{si } x > 0
 \end{array} \right.
\end{equation*}
\end{example}


\ei{array} peut aussi servir à mettre en page des
matrices\index{matrice}, mais \pai{amsmath} fournit une meilleure
solution via les environnements \ei{matrix}. Il y en a six versions
(avec des délimiteurs différents) : \ei{matrix} (aucun), \ei{pmatrix}
$($, \ei{bmatrix} $[$, \ei{Bmatrix} $\{$, \ei{vmatrix} $\vert$ et
\ei{Vmatrix} $\Vert$. Vous n'avez pas à spécifier le nombre de
colonnes comme avec \ei{array}. Leur nombre maximal est de 10 mais il
est modifiable (bien que ce ne soit pas fréquent d'avoir besoin de 10
colonnes ou plus !) :
\begin{example}
\begin{equation*}
 \begin{matrix} 
   1 & 2 \\
   3 & 4 
 \end{matrix} \qquad
 \begin{bmatrix} 
   1 & 2 & 3 \\
   4 & 5 & 6 \\ 
   7 & 8 & 9
 \end{bmatrix}
\end{equation*}
\end{example}

\section{Espacement en mode mathématique}
\label{sec:math-spacing}

\index{espacement!mathématique}
\index{mathématiques!espaces}

Si l'espacement choisi par \LaTeX{} dans une formule n'est pas
satisfaisant, il peut être ajusté en insérant des commandes
d'espacement. Les plus importantes sont : \ci{,} pour une espace fine
($\frac{3}{18}\:\textrm{quad}$, \demowidth{0.166em}), \ci{:} pour une
espace moyenne ($\frac{4}{18}\:\textrm{quad}$, \demowidth{0.222em}) et
\ci{;} pour une espace grande ($\frac{5}{18}\: \textrm{quad}$,
\demowidth{0.277em}).  L'espace échappée \verb*|\ | crée une espace
moyenne similaire à l'espace entre mots. and \ci{quad}
(\demowidth{1em}) et \ci{qquad} (\demowidth{2em}) produisent des
espaces plus larges.  La largeur d'un \ci{quad}
%SC: \footnote{cadratin} ?? A vérifier -mh
correspond à la largeur du caractère \og M \fg{} dans la police courante. 
La commande \verb|\!|\cih{"!} produit une espace fine négative
de $-\frac{3}{18}\:\textrm{quad}$ ($-$\demowidth{0.166em}). Remarquez
que dans l'exemple suivant, \og d \fg{} est imprimée en police romaine :

\begin{example}
\begin{equation*}
 \int_1^2 \ln x \mathrm{d}x \qquad
 \int_1^2 \ln x \,\mathrm{d}x
\end{equation*}
\end{example}


Dans l'exemple suivant, nous définissons une commande \ci{ud} qui
produit \og $\,\mathrm{d}$ \fg{} (remarquez l'espace
\demowidth{0.166em} avant le $\text{d}$), de manière à ne pas avoir à
le saisir à chaque fois. La commande  \ci{newcommand} est placée en
préambule.
%  More on
% \ci{newcommand} in section~\ref{} on page \pageref{}. To Do: Add label and
% reference to "Customising LaTeX" -> "New Commands, Environments and Packages"
% -> "New Commands".
\begin{example}
\newcommand{\ud}{\,\mathrm{d}}

\begin{equation*}
 \int_a^b f(x)\ud x 
\end{equation*}
\end{example}

Lorsque vous utilisez des intégrales multiples, vous constatez que
l'espace entre celles-ci est trop grand. Vous pouvez certes utiliser
\ci{!}, mais \AmS-\LaTeX{} propose un ensemble de commandes pour
réaliser cet ajustement : \ci{iint}, \ci{iiint},
\ci{iiiint} et \ci{idotsint}.

\begin{example}
\newcommand{\ud}{\,\mathrm{d}}

\[ \int\int f(x)g(y) 
                  \ud x \ud y \]
\[ \int\!\!\!\int 
         f(x)g(y) \ud x \ud y \]
\[ \iint f(x)g(y) \ud x \ud y \]
\end{example}

Reportez-vous au document \texttt{testmath.tex} distribué avec
\AmS-\LaTeX{}, au chapitre 8 de \companion{} ou au chapitre 9 de
\desgraupes{} pour plus de détails.


\subsection{Fantômes\texorpdfstring{\dots}{...}}


Il arrive que \LaTeX{} en fasse un peu trop dans des alignements
verticaux d'indices ou d'exposants. La commande \ci{phantom} permet
de réserver de l'espace pour des caractères qui ne seront pas
imprimés, comme le montrent les exemples suivants :
\begin{example}
\begin{equation*}
{}^{14}_{6}\text{C}
\qquad \text{à comparer à} \qquad
{}^{14}_{\phantom{1}6}\text{C}
\end{equation*}
\end{example}

Si vous souhaitez mettre en forme des isotopes comme dans l'exemple
ci-avant, l'extension \pai{mhchem} dédiée aux formules chimiques peut
vous y aider.


\section{Manipuler les polices mathématiques}\label{sec:fontsz}
Plusieurs polices mathématiques sont listée au tableau~\ref{mathalpha}
page \pageref{mathalpha}.
\begin{example}
 $\Re \qquad
  \mathcal{R} \qquad
  \mathfrak{R} \qquad
  \mathbb{R} \qquad $  
\end{example}
Ces deux dernières nécessitent \pai{amssymb} ou \pai{amsfonts}.

Malgré tout, il peut être nécessaire d'indiquer à \LaTeX{} la taille
exacte. En mode mathématique, la taille de la police est déterminée
par les quatre commandes :
\begin{flushleft}
\ci{displaystyle}~($\displaystyle 123$),
 \ci{textstyle}~($\textstyle 123$), 
\ci{scriptstyle}~($\scriptstyle 123$) et
\ci{scriptscriptstyle}~($\scriptscriptstyle 123$).
\end{flushleft}

Si $\sum$ est placé dans une fraction, il sera imprimé en-ligne à
moins d'indiquer à \LaTeX{} le contraire :
\begin{example}
\begin{equation*}
 R = \frac{\displaystyle{ 
   \sum_{i=1}^n (x_i-\bar{x})
   (y_i- \bar{y})}} 
   {\displaystyle{\left[
   \sum_{i=1}^n(x_i-\bar{x})^2
   \sum_{i=1}^n(y_i-\bar{y})^2
   \right]^{1/2}}}
\end{equation*}    
\end{example}

Changer de style modifie également la façon dont les limites et les
grands opérateurs sont affichés.
 
% This is not a math accent, and no maths book would be set this way.
% mathop gets the spacing right.


\section{Symboles gras}
\index{symboles!gras}

Il est relativement ardu d'obtenir des symboles gras avec \LaTeX{} ;
cela est sans doute fait exprès car les typographes amateurs ont
tendance à en abuser. La commande de changement de graisse
\verb|\mathbf| permet d'obtenir des caractères gras, mais romains
(donc droits) alors que les symboles mathématiques sont normalement en
italique. De plus elle ne fonctionne pas sur les minuscules
grecques. Il y a bien une commande \ci{boldmath}, mais \emph{elle ne
  peut être utilisée qu'en dehors du mode mathématique}. Cependant
elle fonctionne aussi pour les symboles :
\begin{example}
$\mu, M \qquad 
\mathbf{\mu}, \mathbf{M}$
\qquad \boldmath{$\mu, M$}
\end{example}

L'extension \pai{amsbsy} (appelée par \pai{amsmath}) ainsi que
\pai{bm} dans le paquet \texttt{tools} simplifient beaucoup ce
problème puisqu'ils fournissent une commande \ci{boldsymbol} :

\begin{example}
$\mu, M \qquad
\boldsymbol{\mu}, \boldsymbol{M}$
\end{example}


\section{Théorèmes, lemmes, etc.}

En rédigeant des documents mathématiques, on a besoin d'un moyen de
présenter des lemmes, des définitions, des axiomes et d'autres
structures similaires :
\begin{lscommand}
\ci{newtheorem}\verb|{|\emph{nom}\verb|}[|\emph{compteur}\verb|]{|%
         \emph{texte}\verb|}[|\emph{section}\verb|]|
\end{lscommand}
L'argument \emph{nom} est un mot-clef utilisé pour identifier le
théorème. L'argument \emph{texte} définit le nom réel du théorème tel
qu'il sera imprimé dans le document final.

Les arguments entre crochets sont optionnels. Ils servent à
indiquer la numérotation à utiliser sur le théorème. Utilisez
le \emph{compteur} pour indiquer le \emph{nom} d'un théorème déjà
déclaré. Le nouveau théorème sera alors numéroté dans la même
séquence. Avec \emph{section} vous indiquez dans quel niveau de
sectionnement vous voulez numéroter votre théorème.

Après avoir exécuté \ci{newtheorem} dans le préambule de votre
document, vous pouvez utiliser la commande suivante :

\begin{code}
\verb|\begin{|\emph{nom}\verb|}[|\emph{texte}\verb|]|\\
Ceci est mon premier théorème\\
\verb|\end{|\emph{nom}\verb|}|     
\end{code}

L'extension \pai{amsthm} (qui fait partie d'\AmS-LaTeX) met à
disposition la commande
\ci{newtheoremstyle}\verb|{|\emph{style}\verb|}| qui vous montrera que
le choix de style pour les théorèmes se limite à trois styles
préféfinis : \texttt{definition} (titre gras, corps romain),
\texttt{plain} (titre gras, corps italique) or \texttt{remark} (titre
italique, corps romain).

%SC: ah, the initial translation missed the subtle sarcasm here
Voilà pour la théorie. Les exemples qui suivent devraient lever tout
doute et montrer clairement que l'environnement \verb|\newtheorem| est
trop complexe à comprendre.

% actually define things
\theoremstyle{definition} \newtheorem{loi}{loi}
\theoremstyle{plain}      \newtheorem{decret}[loi]{Décret}
\theoremstyle{remark}     \newtheorem*{lechef}{Le chef}

D'abord définissez les théorèmes :

\begin{verbatim}
\theoremstyle{definition} \newtheorem{loi}{loi}
\theoremstyle{plain}      \newtheorem{decret}[loi]{Décret}
\theoremstyle{remark}     \newtheorem*{lechef}{Le chef}
\end{verbatim}

\begin{example}
\begin{loi} \label{chef}
Le chef a raison.
\end{loi}
\begin{decret}[Important]
Le chef a toujours raison,
voir la loi~\ref{chef}.
\end{decret}
\begin{lechef}
Et si le chef a tort, se référer
à la loi~\ref{chef}.
\end{lechef}
\end{example}


Le théorème \og decret \fg{} utilise le même compteur que le
théorème \og loi \fg{}, donc il obtient un numéro dans la même
séquence que les autres \og lois \fg{}. L'argument entre crochets permet
de spécifier un titre ou quelque chose de ce genre pour le théorème.
\begin{example}
\newtheorem{mur}{Murphy}[section]
\begin{mur} Tout ce qui peut 
aller mal ira mal.\end{mur}
\end{example}

Le théorème \og Murphy \fg{} est numéroté à l'intérieur de la section en
cours. On aurait pu utiliser un autre niveau tel que \texttt{chapter}
ou \texttt{subsection}. 

L'extension \pai{amsthm} fournit aussi l'environnement de preuve
\ei{proof}.

\begin{example}
\begin{proof}
 Trivial, utilisez
\[E=mc^2\]
\end{proof}
\end{example}

La commande \ci{qedhere} permet de déplacer le symbole de fin de
preuve (CQFD) pour les cas où il finirait seul sur une ligne.

\begin{example}
\begin{proof}
 Trivial, utilisez
\[E=mc^2 \qedhere\]
\end{proof}
\end{example}

Si vous voulez personnaliser vos théorèmes au point près, l'extension
\pai{ntheorem} vous offrira la pléthore d'options dont vous avez
besoin.


\endinput

%

% Local Variables:
% TeX-master: "lshort"
% mode: latex
% mode: flyspell
% End:
